---\ncreated: '2025-12-15'\nupdated: '2025-12-15'\nstatus: active\nmission: 'Phase 2 P0 Blockers â€” Session Split Strategy'\n---\n\n# Phase 2 P0 Blockers â€” Execution Split (2 Sessions + Parallel Agents)\n\n## ğŸ¯ Overview\n\n**Objective**: Complete Phase 2 P0 blockers (14 items) across 2 sessions with 4 parallel agents.\n\n**Critical path**: A1 + A3 (accessibility) â†’ blocks U6 UI integration â†’ enables T2/T3 tests\n\n---\n\n## ğŸ“‹ SESSION 1 â€” Accessibility Focus + Component Tests (This Session)\n\n### Parallel Execution (3 Agents)\n\n#### **Agent A1: Modals Accessibility** (4 hours)\n\n**Task**: A1 - Make 12 modals accessible to screen readers\n\n**Input**:\n- Audit report: `audit-2025-14-12/reports/2025-12-14_accessibility-validation.md`\n- Handoff: `audit-2025-14-12/handoffs/handoff-engineer-accessibility.md`\n- Affected modals: PremiumModal, DiscoveryModal, MoreActivitiesModal, MoreColorsModal, etc. (see audit)\n\n**Deliverable**:\n- âœ… All 12 modals have accessible labels (`accessibilityLabel`)\n- âœ… All modals have semantically correct roles (`accessibilityRole=\"dialog\"`)\n- âœ… Focus management correct (trap focus in modal)\n- âœ… Screen reader readable (test with VoiceOver iOS)\n\n**Files to modify**:\n- `src/components/modals/*` (all modal files)\n- Estimate: 12-15 files\n\n**Definition of Done**:\n- VoiceOver can navigate all modal elements\n- Modal titles announced on open\n- Close button accessible\n- Focus returns to trigger on close\n- Tests pass (existing modal tests + new a11y tests)\n\n---\n\n#### **Agent A3: Timer Dial Accessibility** (8 hours)\n\n**Task**: A3 - Make timer dial accessible to screen readers\n\n**Input**:\n- Audit report: `audit-2025-14-12/reports/2025-12-14_accessibility-baseline.md`\n- Handoff: `audit-2025-14-12/handoffs/handoff-engineer-accessibility.md`\n- Component: `TimerDial.jsx` + `DialBase.jsx` + `DialProgress.jsx`\n\n**Challenge**: SVG is complex, not naturally accessible\n\n**Approach**:\n1. Create accessible text layer (activity name + remaining time)\n2. Provide alternative text representation\n3. Ensure buttons (play/pause/reset) are accessible\n4. Test with VoiceOver/TalkBack\n\n**Deliverable**:\n- âœ… Timer dial announces remaining time on update\n- âœ… Activity name announced\n- âœ… Play/pause/reset buttons accessible with touch targets >44Ã—44pt\n- âœ… Progress communicated to screen readers\n- âœ… VoiceOver can fully control timer\n\n**Files to modify**:\n- `src/components/timer/TimerDial.jsx`\n- `src/components/timer/dial/DialBase.jsx`\n- `src/components/timer/dial/DialProgress.jsx`\n- `src/components/layout/TimeTimer.jsx`\n- Estimate: 4-6 files\n\n**Definition of Done**:\n- VoiceOver announces remaining time\n- Buttons announced and operational\n- No missing labels\n- All updates announced dynamically\n- Tests pass\n\n---\n\n#### **Agent T1.9-T1.12: Component Test Completion** (4-6 hours)\n\n**Task**: Complete remaining component tests (T1.9 â†’ T1.12)\n\n**Current status** (from agent af59aa2):\n- âœ… T1.0-T1.8: 8 test files created + mocks setup\n- âŒ T1.9-T1.12: 4 files remaining\n\n**Test files to create**:\n1. **T1.9** - `PremiumModal.test.js` (in progress, finish)\n   - Test: Modal displays correctly\n   - Test: Unlock button navigates to purchase\n   - Test: Restore purchases button works\n   - Estimate: 1-1.5h\n\n2. **T1.10** - `ActivityCarousel.test.js`\n   - Test: Displays all activities (free + premium)\n   - Test: Selection updates current activity\n   - Test: Premium items show lock icon\n   - Test: Plus button opens DiscoveryModal\n   - Estimate: 1-1.5h\n\n3. **T1.11** - `PaletteCarousel.test.js`\n   - Test: Displays all palettes (free + premium)\n   - Test: Selection updates current palette\n   - Test: Premium items show lock\n   - Estimate: 1h\n\n4. **T1.12** - `TimerDial.test.js`\n   - Test: Renders with correct progress\n   - Test: Activity emoji displays\n   - Test: Digital timer updates\n   - Test: SVG elements render\n   - Estimate: 1-1.5h\n\n**Deliverable**:\n- âœ… 4 test files created\n- âœ… 30+ new tests (total ~150 tests)\n- âœ… Coverage >80% for these components\n- âœ… All tests passing\n\n**Files to create**:\n- `__tests__/components/PremiumModal.test.js` (finish)\n- `__tests__/components/ActivityCarousel.test.js` (new)\n- `__tests__/components/PaletteCarousel.test.js` (new)\n- `__tests__/components/TimerDial.test.js` (new)\n\n**Definition of Done**:\n- `npm test __tests__/components/` shows ~150 tests passing\n- Coverage report confirms >80% for component layer\n- No regressions in existing tests\n\n---\n\n### Main Agent Coordination\n\n**While agents run in parallel**:\n1. Monitor agent progress\n2. Unblock any issues (mock problems, audit clarifications)\n3. Prepare U6 handoff documentation\n4. Review completed A1 + A3 work\n5. Consolidate test results\n\n**Checkpoints**:\n- â° 2h: A1 half-done, A3 started, T1.9 finishing\n- â° 4h: A1 complete, A3 half-done, T1.10-T1.12 in progress\n- â° 6-8h: A1+A3 complete, T1.9-T1.12 complete\n\n---\n\n## ğŸ“‹ SESSION 2 â€” Modal Refactor + Integration Tests (Handoff)\n\n### Agent B: U6 Modal Stacking Refactor (Continuation)\n\n**Status**: Foundation created by agent aefe75f (ModalStackContext)\n\n**Remaining**:\n1. **U6.2** - Integrate ModalStack into PremiumModal flow (1 day)\n   - Use ModalStackContext to manage modal hierarchy\n   - Add back button to nested modals\n   - Fix deadlock issue\n\n2. **U6.3** - Test modal flows end-to-end (1 day)\n   - Test: Premium â†’ PricingModal â†’ error recovery\n   - Test: Back button navigation\n   - Test: No stacking deadlocks\n\n**Deliverable**:\n- âœ… ModalStack integrated in all premium flows\n- âœ… No modal deadlocks\n- âœ… Back button works at all levels\n- âœ… E2E tests passing\n\n**Depends on**: A1 (modals must be accessible first)\n\n---\n\n### Agent T2: Screen Integration Tests (New Session)\n\n**Task**: T2 - Create screen-level tests (1-2 days)\n\n**Test files to create**:\n1. `TimerScreen.test.js` - Main app screen\n2. `OnboardingController.test.js` - Onboarding flow\n3. `SettingsScreen.test.js` - Settings modal\n\n**Coverage**:\n- User flow: Select activity â†’ Set duration â†’ Start timer\n- Onboarding flow: Welcome â†’ Customize â†’ Completion\n- Settings: Open, modify, close\n\n**Deliverable**:\n- âœ… 3 screen test files created\n- âœ… 20-30 new tests\n- âœ… All screen flows tested\n\n---\n\n### Agent T3: Integration Tests (New Session)\n\n**Task**: T3 - Create end-to-end user journey tests (1 day)\n\n**Test scenarios**:\n1. Onboarding â†’ TimerScreen â†’ Complete timer\n2. TimerScreen â†’ Premium discovery â†’ Purchase flow\n3. Settings â†’ Accessibility settings â†’ Apply\n\n**Deliverable**:\n- âœ… 3 integration test files\n- âœ… 10-15 journey tests\n- âœ… Full user flows validated\n\n---\n\n## ğŸ“Š Execution Timeline\n\n### Session 1 (This session)\n\n```\nT+0min:   Commit Phase 4, spawn 3 agents\nT+2h:     A1 half-done, A3 started, T1.9 finishing\nT+4h:     A1 complete, A3 halfway, T1.10-T1.12 in progress  \nT+6-8h:   A1 complete âœ…, A3 complete âœ…, T1.9-T1.12 complete âœ…\n          â†’ Consolidate results, create U6 handoff doc\n          â†’ PHASE 2 Accessibility: COMPLETE\n          â†’ PHASE 2 Component Tests: COMPLETE\n```\n\n### Session 2 (Handoff)\n\n```\nDay 1:    U6 integration (1 day) â†’ PHASE 2 Modal Stacking: COMPLETE\n          T2 screen tests (1-2 days, can run in parallel)\nDay 2-3:  T3 integration tests (1 day)\nDay 4:    Final validation, sign-off\n          â†’ PHASE 2 COMPLETE (100%)\n```\n\n---\n\n## ğŸ”— Handoff Documentation\n\n**Create for Session 2**:\n\n### `handoff-phase-2-session-2.md`\n\nContains:\n- U6.2-U6.3 task breakdown\n- T2 screen test template\n- T3 integration test template\n- ModalStack context usage guide\n- Audit reports links\n- Dependency graph\n\n---\n\n## âœ… Success Criteria\n\n### Session 1 Complete When:\n\n- [ ] A1: All 12 modals accessible (VoiceOver tested)\n- [ ] A3: Timer dial fully accessible (VoiceOver tested)\n- [ ] T1.9-T1.12: 4 test files created, 150+ total tests passing\n- [ ] current.md updated: Phase 2 Accessibility (4/4) + Phase 2 Component (8/12)\n- [ ] No regressions: `npm test` 100% passing\n- [ ] Handoff doc prepared for Session 2\n\n### Session 2 Complete When:\n\n- [ ] U6: Modal stacking complete, no deadlocks\n- [ ] T2: Screen tests complete\n- [ ] T3: Integration tests complete\n- [ ] `npm test` 100% passing (~200 tests total)\n- [ ] Phase 2 COMPLETE (14/14)\n- [ ] Ready for Phase 3 (quick wins validation)\n\n---\n\n## ğŸ“ Agent Assignment\n\n| Agent | Task | Files | Time | Dependencies |\n|-------|------|-------|------|---------------|\n| **A1** | Modals accessibility | 12-15 | 4h | None (parallel) |\n| **A3** | Timer dial accessibility | 4-6 | 8h | None (parallel) |\n| **T1** | Component tests (T1.9-T1.12) | 4 | 4-6h | None (parallel) |\n| **U6** | Modal stacking (Session 2) | 3-5 | 2-3d | Needs A1 complete |\n| **T2** | Screen tests (Session 2) | 3 | 1-2d | Needs A1+A3 complete |\n| **T3** | Integration tests (Session 2) | 3 | 1d | Needs T2 complete |\n\n---\n\n## ğŸš€ How to Execute\n\n### Session 1 (Now)\n\n```bash\n# 1. Commit Phase 4\ngit add . && git commit -m \"feat(phase-4): Memoization + Timer optimization\"\n\n# 2. Update current.md (lines 252-253)\n# Mark Phase 4: 11/11 COMPLETE âœ…\n\n# 3. Spawn agents\n# Agent A1: \"Implement A1 - Modals accessibility\"\n# Agent A3: \"Implement A3 - Timer dial accessibility\"\n# Agent T1: \"Complete T1.9-T1.12 component tests\"\n\n# 4. Main: Monitor + consolidate\n```\n\n### Session 2 (Copy-paste this file)\n\n```bash\n# 1. Pull latest (A1+A3+T1.9-T1.12 complete)\n# 2. Spawn agents for U6, T2, T3\n# 3. Follow timeline above\n```\n\n---\n\n**Status**: Ready for Session 1 execution\n**Created**: 2025-12-15\n**Plan**: 3 parallel agents (8-12h for Session 1 + accessibility focus)\n"